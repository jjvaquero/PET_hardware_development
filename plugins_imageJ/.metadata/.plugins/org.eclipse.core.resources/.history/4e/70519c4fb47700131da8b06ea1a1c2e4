import ij.IJ;
import ij.ImagePlus;
import ij.process.ImageProcessor;
import ij.process.ShortProcessor;
import ij.io.*;
import ij.plugin.*;


public class nimiMapa_1 implements PlugIn {
	ImagePlus img;
	ImageProcessor myProc;

	//public int setup(String arg, ImagePlus imp) {
		
    public void run(String arg) {
		//first I will try to open the new miniMap image
		ImportDialog impDiag = new ImportDialog("minimap.raw","C:/Users/rchil/Desktop/Detect_SuperArgus/datos_16_12_13");
		FileInfo fInf = impDiag.getFileInfo();
		OpenDialog myDiag= new OpenDialog("Dialogo 1");
		fInf.fileName = myDiag.getFileName();		
		fInf.directory = myDiag.getDirectory();
		FileOpener fOpen = new FileOpener(fInf);
		
		img = fOpen.open(true);
		myProc = new ShortProcessor(img.getWidth(),img.getHeight());
		img.setProcessor(myProc);
		//myProc = img.getProcessor();

		//this.imp = imp;
		//modify later to use only 16 bits images
	//}
	
	//public void run(ImageProcessor ip) {
		IJ.showStatus("Start processing...");
		IJ.wait(10000);
		int height = myProc.getHeight();
		int width = myProc.getWidth();
		for (int x = 0; x < width; x++) {
			for(int y = 0; y < height; y++) {
				if (x == y)
					//myProc.putPixel(x, y, 0);
					img.draw(x, y, 1, 1);
			        myProc.drawPixel(x, y);
			}
		}
	}
}